# 网络与协议 高频面试题（题 + 答案 + 扩展）

## 1 TCP 三次握手、四次挥手
**题目**：解释 TCP 三次握手与四次挥手。  
**答案**：三次握手：Client SYN -> Server SYN+ACK -> Client ACK；建立可靠连接。四次挥手：Client FIN -> Server ACK -> Server FIN -> Client ACK；确保双方数据传输完成。  
**扩展**：为什么要三次而不是两次（确认双方初始化序列号）。

## 2 HTTP1.1 vs HTTP2 vs HTTP3
**题目**：三者区别与优劣？  
**答案**：HTTP1.1 每个连接串行或有限并发；HTTP2 多路复用、header 压缩；HTTP3 基于 QUIC（UDP）减少握手延迟及提升连接迁移能力。  
**扩展**：HTTP2 的 head-of-line blocking 与 QUIC 的改进。

## 3 TLS/TCP 简要流程
**题目**：TLS 握手大致流程？  
**答案**：TLS 建立安全通道：Client Hello -> Server Hello（证书）-> 密钥协商 -> Finished，之后使用对称密钥加密通信。  
**扩展**：证书链、CA、证书吊销与 OCSP。

## 4 CDN 原理与缓存
**题目**：CDN 如何加速静态资源？缓存策略如何设计？  
**答案**：CDN 在边缘节点缓存资源，减少 RTT 和带宽压力。策略依据资源类型设置 Cache-Control、hash 版本化、合理设置 TTL。  
**扩展**：动态内容缓存策略与缓存失效设计。

## 5 REST vs GraphQL
**题目**：两者区别与适用场景？  
**答案**：REST 多端点，易缓存；GraphQL 单 endpoint，按需取数，适合复杂前端组合请求。GraphQL 需要更多后端投入（复杂度、缓存策略）。  
**扩展**：如何为 GraphQL 做缓存（DataLoader、APQ、persisted queries）。

## 6 CORS 原理
**题目**：CORS 如何工作？预检请求什么时候发生？  
**答案**：浏览器基于同源策略进行限制，CORS 通过响应头允许跨源访问。非简单请求（Content-Type 非三种、非 GET/POST/HEAD、带自定义 header）会触发预检 OPTIONS 请求。  
**扩展**：如何优化预检（减少自定义 header、合理使用 simple requests）。

## 7 WebSocket 与 HTTP 的区别
**题目**：什么时候用 WebSocket？它的工作模式？  
**答案**：WebSocket 建立长连接，适合实时消息、推送场景。建立后可双向传输，减少每次请求的握手开销。  
**扩展**：考虑规模时的连接管理、心跳、断线重连、负载均衡。

## 8 常见性能问题与诊断
**题目**：如何诊断网络引起的性能问题？  
**答案**：使用 Chrome DevTools network 面板查看请求耗时、TTFB、大小、重定向，结合 Lighthouse 分析。优化：压缩、CDN、减少请求数、合并资源、HTTP2。  
**扩展**：如何结合后端日志做端到端链路追踪（zipkin/jaeger）。

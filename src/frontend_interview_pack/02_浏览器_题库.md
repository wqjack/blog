# 浏览器 高频面试题（题 + 答案 + 扩展）

## 1 重绘（Repaint）与回流（Reflow）
**题目**：介绍下重绘和回流，并说说如何优化？  
**答案**：回流指重新计算布局（触发场景：改变尺寸、DOM 结构、读取布局属性）；重绘指视觉样式改变不触发布局（如 color）。回流比重绘消耗更大。  
**优化**：批量修改 DOM（class 切换）、使用 DocumentFragment、缓存布局值、避免频繁测量（offsetWidth）、使用 transform/opacity 做动画、requestAnimationFrame。  

## 2 DOM 渲染流程
**题目**：浏览器渲染页面的流程？  
**答案**：解析 HTML -> DOM，解析 CSS -> CSSOM，合并为 Render Tree，Layout（回流），Paint（重绘），Composite（合成）。JS 在解析过程中可能阻塞渲染（除 async/defer）。  
**扩展**：defer 与 async 区别；如何通过 preconnect/preload 优化资源加载。

## 3 缓存策略（强缓存 vs 协商缓存）
**题目**：讲讲浏览器缓存策略。  
**答案**：强缓存（Expires/Cache-Control:max-age）直接命中；协商缓存（ETag/Last-Modified + If-None-Match/If-Modified-Since）由服务器返回 304。  
**扩展**：静态资源版本化方法（文件名带 hash）、CDN 配置技巧。

## 4 XSS 防御
**题目**：XSS 是什么？如何防御？  
**答案**：跨站脚本注入（反射、存储、DOM）。防御：对用户输入转义、使用 CSP、避免直接 innerHTML、HttpOnly cookie、严格内容过滤（如 DOMPurify）。  
**扩展**：案例分析、如何在渲染富文本时保证安全。

## 5 CSRF 防御
**题目**：CSRF 是什么？如何防护？  
**答案**：伪造请求通过受害者浏览器自动携带 Cookie 发送。防护方法：使用 CSRF Token、SameSite Cookie、Referer/Origin 校验、将认证信息放到 Header（不由浏览器自动携带）或使用双重提交 cookie。  
**扩展**：SameSite None 与 Secure 的关系。

## 6 同源策略 & 跨域
**题目**：如何理解同源策略？怎么解决跨域？  
**答案**：同源 = 协议 + 域名 + 端口相同。解决方案：CORS、JSONP（仅 GET）、服务器代理、WebSocket、postMessage。  
**扩展**：CORS 预检流程与性能考量。

## 7 页面加载性能优化
**题目**：提高首屏加载速度的策略？  
**答案**：压缩资源、图片懒加载、CDN、preload/prefetch、代码分割、减少阻塞脚本、HTTP/2/3 协议优势、减少回流。  
**扩展**：Core Web Vitals（FCP、LCP、CLS、TTI）指标解读。

## 8 浏览器与 Node 的 EventLoop 区别
**题目**：浏览器和 Node 的事件循环区别？  
**答案**：Node 有多个阶段（timers, pending callbacks, idle, poll, check, close callbacks），且有 process.nextTick 和 microtask（nextTick 优先级更高）。浏览器较为简单：宏任务队列 + 微任务队列。  
**扩展**：实际面试可画图解释。

## 9 存储对比（cookie/localStorage/indexedDB）
**题目**：它们的区别和适用场景？  
**答案**：cookie 小、随请求发送、用于认证；localStorage 同源大约 5MB、同步 API；sessionStorage 会话级别；indexedDB 异步、容量大、适合离线存储。  
**扩展**：localStorage 的阻塞问题，indexedDB 的事务模型。

## 10 从输入 URL 到页面展示完整流程
**题目**：描述从输入 URL 到页面展示的过程（含网络层）  
**答案**：DNS 解析 -> TCP 三次握手 -> TLS（如果有） -> HTTP 请求 -> 服务端响应 -> 浏览器解析 HTML/CSS/JS -> Render Tree -> Layout -> Paint -> Composite。  
**扩展**：HTTP/2 多路复用、QUIC 与 HTTP/3 优势。
